<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admission Form - Five Brothers Education Consultants</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- WhatsApp Chat Button -->
    <a href="https://wa.me/03480044556" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Navbar -->
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo-white.png" alt="Five Brothers Logo">
                </a>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <div class="nav-container">
                <nav class="navbar">
                    <ul class="nav-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li class="dropdown">
                            <a href="services.html">Services <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="services.html">Study Abroad Consulting</a></li>
                                <li><a href="services.html">Admission Guidance</a></li>
                                <li><a href="services.html">Visa Assistance</a></li>
                                <li><a href="services.html">Scholarships & Financial Aid</a></li>
                                <li><a href="services.html">Test Preparation</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="destinations.html">Destinations <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="destinations.html">United Kingdom</a></li>
                                <li><a href="destinations.html">Italy</a></li>
                                <li><a href="destinations.html">China</a></li>
                                <li><a href="destinations.html">Turkey</a></li>
                                <li><a href="destinations.html">North Cyprus</a></li>
                                <li><a href="destinations.html">USA</a></li>
                            </ul>
                        </li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="admission-form.html">Admission Form</a></li>
                    </ul>
                </nav>
                <div class="nav-buttons">
                    <a href="contact.html" class="btn btn-primary">Contact</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Admission Form Section -->
    <section class="admission-section" id="admission-form">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Start Your Journey</span>
                <h2 class="section-title">Admission Application</h2>
                <div class="divider"></div>
                <p class="section-description">Fill out the form below to begin your application process with Five Brothers Education Consultants.</p>
            </div>
            <div class="admission-grid">
                <!-- Admission Form -->
                <div class="admission-form">
                    <h3>Admission Application Form</h3>
                    <div class="form-message" id="form-message"></div>
                    <form id="admission-form" action="https://formspree.io/f/manoaygy" method="POST" enctype="multipart/form-data" class="form">
                        <!-- Personal Information -->
                        <h4>Personal Information</h4>
                        <div class="form-group">
                            <label for="full-name">Full Name <span class="required">*</span></label>
                            <input type="text" id="full-name" name="full_name" required>
                            <div class="error-message">Please enter your full name</div>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email">
                            <div class="error-message">Please enter a valid email address</div>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" required>
                            <div class="error-message">Please enter a valid phone number</div>
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" id="dob" name="date_of_birth">
                            <div class="error-message">Please select your date of birth</div>
                        </div>
                        <div class="form-group">
                            <label for="nationality">Nationality</label>
                            <input type="text" id="nationality" name="nationality">
                            <div class="error-message">Please enter your nationality</div>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender">
                                <option value="" disabled selected>Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="prefer-not-to-say">Prefer not to say</option>
                            </select>
                            <div class="error-message">Please select your gender</div>
                        </div>

                        <!-- Educational Background -->
                        <h4>Educational Background</h4>
                        <div class="form-group">
                            <label for="qualification">Highest Qualification <span class="required">*</span></label>
                            <input type="text" id="qualification" name="qualification" placeholder="e.g., High School, Bachelor's" required>
                            <div class="error-message">Please enter your highest qualification</div>
                        </div>
                        <div class="form-group">
                            <label for="institution">Institution Name <span class="required">*</span></label>
                            <input type="text" id="institution" name="institution" required>
                            <div class="error-message">Please enter your institution name</div>
                        </div>
                        <div class="form-group">
                            <label for="grad-year">Graduation Year <span class="required">*</span></label>
                            <input type="number" id="grad-year" name="graduation_year" min="1900" max="2025" required>
                            <div class="error-message">Please enter a valid graduation year</div>
                        </div>
                        <div class="form-group">
                            <label for="grades">Grades/Percentage <span class="required">*</span></label>
                            <input type="text" id="grades" name="grades" placeholder="e.g., 85%, GPA 3.5" required>
                            <div class="error-message">Please enter your grades or percentage</div>
                        </div>

                        <!-- Program Preferences -->
                        <h4>Program Preferences</h4>
                        <div class="form-group">
                            <label for="countries">Desired Study Countries <span class="required">*</span></label>
                            <select id="countries" name="countries[]" multiple required>
                                <option value="UK">United Kingdom</option>
                                <option value="Italy">Italy</option>
                                <option value="China">China</option>
                                <option value="Turkey">Turkey</option>
                                <option value="North Cyprus">North Cyprus</option>
                                <option value="USA">USA</option>
                                <option value="Canada">Canada</option>
                                <option value="Australia">Australia</option>
                                <option value="Germany">Germany</option>
                                <option value="Other">Other</option>
                            </select>
                            <small class="form-hint">Hold Ctrl (Windows) or Command (Mac) to select exactly 2 countries. On mobile, tap each country to select or deselect.</small>
                            <div class="error-message">Please select exactly 2 countries</div>
                        </div>
                        <div class="form-group">
                            <label for="program-type">Program Type <span class="required">*</span></label>
                            <select id="program-type" name="program_type" required>
                                <option value="" disabled selected>Select</option>
                                <option value="bachelor">Bachelor's Degree</option>
                                <option value="master">Master's Degree</option>
                                <option value="diploma">Diploma/Certificate</option>
                                <option value="phd">PhD</option>
                                <option value="language-course">Language Course</option>
                            </select>
                            <div class="error-message">Please select your program type</div>
                        </div>
                        <div class="form-group">
                            <label for="start-date">Preferred Start Date</label>
                            <input type="date" id="start-date" name="start_date">
                            <div class="error-message">Please select your preferred start date</div>
                        </div>
                        <div class="form-group">
                            <label for="field-of-study">Field of Study</label>
                            <input type="text" id="field-of-study" name="field_of_study" placeholder="e.g., Computer Science, Business Administration">
                            <div class="error-message">Please enter your field of study</div>
                        </div>

                        <!-- Document Uploads -->
                        <h4>Document Uploads</h4>
                        <div class="form-group">
                            <label for="passport">Passport Copy</label>
                            <input type="file" id="passport" name="passport" accept=".pdf,.jpg,.jpeg,.png">
                            <small class="form-hint">(PDF, JPG, or PNG, max 5MB)</small>
                            <div class="error-message">Please upload your passport copy</div>
                        </div>
                        <div class="form-group">
                            <label for="transcript">Academic Transcripts</label>
                            <input type="file" id="transcript" name="transcript" accept=".pdf,.jpg,.jpeg,.png">
                            <small class="form-hint">(PDF, JPG, or PNG, max 5MB)</small>
                            <div class="error-message">Please upload your academic transcripts</div>
                        </div>
                        <div class="form-group">
                            <label for="english-test">English Proficiency Test (e.g., IELTS, TOEFL)</label>
                            <input type="file" id="english-test" name="english_test" accept=".pdf,.jpg,.jpeg,.png">
                            <small class="form-hint">(PDF, JPG, or PNG, max 5MB)</small>
                        </div>
                        <div class="form-group">
                            <label for="cv">CV/Resume</label>
                            <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx">
                            <small class="form-hint">(PDF or DOC, max 5MB)</small>
                        </div>
                        <div class="form-group">
                            <label for="recommendation">Recommendation Letter</label>
                            <input type="file" id="recommendation" name="recommendation" accept=".pdf,.doc,.docx">
                            <small class="form-hint">(PDF or DOC, max 5MB)</small>
                        </div>

                        <!-- Additional Information -->
                        <h4>Additional Information</h4>
                        <div class="form-group">
                            <label for="source">How Did You Hear About Us?</label>
                            <select id="source" name="source">
                                <option value="" disabled selected>Select</option>
                                <option value="website">Website</option>
                                <option value="social-media">Social Media</option>
                                <option value="friend">Referral</option>
                                <option value="advertisement">Advertisement</option>
                                <option value="education-fair">Education Fair</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="comments">Additional Comments</label>
                            <textarea id="comments" name="comments" rows="5" placeholder="Any additional information you’d like to share..."></textarea>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="form-group terms-group">
                            <input type="checkbox" id="terms" name="terms">
                            <label for="terms">I agree to the <a href="privacy-policy.html" target="_blank">Terms and Conditions</a> and <a href="privacy-policy.html" target="_blank">Privacy Policy</a></label>
                            <div class="error-message">You must agree to the terms and conditions</div>
                        </div>

                        <!-- Hidden Fields for Formspree -->
                        <input type="hidden" name="_next" value="http://fivebrothers.com/index.html">
                        <input type="hidden" name="_subject" value="New Admission Form Submission">
                        <input type="hidden" name="_replyto" id="replyto">

                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            Submit Application
                            <span class="spinner" id="spinner"></span>
                        </button>
                    </form>
                </div>
                <!-- Contact Details -->
                <div class="contact-details">
                    <h3>Contact Information</h3>
                    <div class="detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Main Bazar, Katlang, Mardan, Khyber Pakhtunkhwa, Pakistan</p>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-phone"></i>
                        <p>Rasheed Ahmad: 0348 004 4556</p>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-envelope"></i>
                        <p>Fb.educonsultant@gmail.com</p>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-clock"></i>
                        <p>Mon - Fri: 9:00 AM - 5:00 PM</p>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-info-circle"></i>
                        <p>Please fill out the required fields (*) and ensure your documents are clear and readable.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <h2>Ready to Begin Your Journey?</h2>
            <p>Contact our team for personalized guidance or explore our services to learn more about studying abroad.</p>
            <div class="cta-buttons">
                <a href="contact.html" class="btn btn-primary">Get in Touch</a>
                <a href="services.html" class="btn btn-secondary">Explore Services</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-item">
                    <h3>About Us</h3>
                    <p>Five Brothers Education Consultants is your trusted partner for studying, working, and traveling abroad with over 10 years of experience helping students achieve their dreams.</p>
                </div>
                <div class="footer-item">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="services.html">Our Services</a></li>
                        <li><a href="destinations.html">Destinations</a></li>
                        <li><a href="blog.html">Blog & News</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-item">
                    <h3>Our Services</h3>
                    <ul>
                        <li><a href="services.html">Study Abroad</a></li>
                        <li><a href="services.html">Work Visa</a></li>
                        <li><a href="services.html">Visit Visa</a></li>
                        <li><a href="services.html">Scholarships</a></li>
                        <li><a href="services.html">Test Preparation</a></li>
                        <li><a href="services.html">Career Counseling</a></li>
                        <li><a href="services.html">Accommodation</a></li>
                    </ul>
                </div>
                <div class="footer-item">
                    <h3>Newsletter</h3>
                    <p>Subscribe to our newsletter to get the latest updates on study abroad opportunities.</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Your Email Address" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Five Brothers Education Consultants. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top"><i class="fas fa-chevron-up"></i></a>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    // Hamburger menu toggle
    const hamburger = document.querySelector('#hamburger');
    const navContainer = document.querySelector('.nav-container');

    if (hamburger && navContainer) {
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navContainer.classList.toggle('active');
        });
    }

    // Dropdown menu toggle for mobile
    const dropdowns = document.querySelectorAll('.dropdown');
    dropdowns.forEach(dropdown => {
        const dropdownToggle = dropdown.querySelector('a');
        dropdownToggle.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                e.preventDefault();
                const isActive = dropdown.classList.toggle('active');
                // Close other dropdowns
                dropdowns.forEach(otherDropdown => {
                    if (otherDropdown !== dropdown) {
                        otherDropdown.classList.remove('active');
                    }
                });
            }
        });
    });

    // Close mobile menu when clicking a link
    const navLinks = document.querySelectorAll('.nav-links a');
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (window.innerWidth <= 768 && !link.parentElement.classList.contains('dropdown')) {
                hamburger?.classList.remove('active');
                navContainer?.classList.remove('active');
                dropdowns.forEach(dropdown => dropdown.classList.remove('active'));
            }
        });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        if (window.innerWidth <= 768 && navContainer && hamburger && !navContainer.contains(e.target) && !hamburger.contains(e.target)) {
            hamburger.classList.remove('active');
            navContainer.classList.remove('active');
            dropdowns.forEach(dropdown => dropdown.classList.remove('active'));
        }
    });

    // Set active class based on current page
    const currentPath = window.location.pathname.split('/').pop() || 'index.html';
    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === currentPath) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });

    // Newsletter form submission
    const newsletterForm = document.querySelector('.newsletter-form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const emailInput = newsletterForm.querySelector('input[type="email"]');
            if (emailInput.value) {
                alert('Thank you for subscribing!');
                newsletterForm.reset();
            } else {
                alert('Please enter a valid email address.');
            }
        });
    }

    // Fade-in animations for sections
    const fadeInSections = document.querySelectorAll('.hero, .about-section, .services-section, .why-choose-us, .success-counter, .cta, .faq-section');
    const observerOptions = {
        threshold: 0.1
    };

    const fadeObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    fadeInSections.forEach(section => {
        fadeObserver.observe(section);
    });

    // FAQ accordion functionality
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        question.addEventListener('click', () => {
            faqItems.forEach(otherItem => {
                if (otherItem !== item && otherItem.classList.contains('active')) {
                    otherItem.classList.remove('active');
                }
            });
            item.classList.toggle('active');
        });
    });

    // Back to Top Button
    const backToTopButton = document.createElement('div');
    backToTopButton.className = 'back-to-top';
    backToTopButton.innerHTML = '<i class="fas fa-arrow-up"></i>';
    document.body.appendChild(backToTopButton);

    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
            backToTopButton.classList.add('active');
        } else {
            backToTopButton.classList.remove('active');
        }
    });

    backToTopButton.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    // Unified counter animation function
    function animateCounter(counterElement, target, isPercentage = false) {
        let count = 0;
        const increment = target / 100;
        
        function updateCounter() {
            if (count < target) {
                count += increment;
                counterElement.innerText = Math.ceil(count) + (isPercentage ? '%' : '+');
                requestAnimationFrame(updateCounter);
            } else {
                counterElement.innerText = target + (isPercentage ? '%' : '+');
            }
        }
        
        updateCounter();
    }

    // Counter animation observer
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Stats Counter
                document.querySelectorAll('.stats-counter .stat-number, .achievement-number').forEach(stat => {
                    const target = parseInt(stat.getAttribute('data-count'));
                    const isPercentage = stat.getAttribute('data-count')?.endsWith('%') || stat.getAttribute('data-count') === '95';
                    animateCounter(stat, target, isPercentage);
                });

                // Success Counter
                const successCounters = document.querySelectorAll('.success-counter .counter-item h3');
                const targets = [500, 200, 95]; // Students Placed, Partner Universities, Visa Success Rate
                successCounters.forEach((counter, index) => {
                    animateCounter(counter, targets[index], index === 2);
                });

                counterObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });

    // Observe all counter sections
    document.querySelectorAll('.stats-counter, .success-counter, .achievements-section').forEach(section => {
        if (section) counterObserver.observe(section);
    });

    // Unified form handling
    const admissionForm = document.getElementById('admission-form');
    if (admissionForm) {
        // Set the replyto field to match the email field
        const emailField = document.getElementById('email');
        if (emailField) {
            emailField.addEventListener('change', function() {
                document.getElementById('replyto').value = this.value;
            });
        }

        // Form validation functions
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function isValidPhone(phone) {
            return /^[+]?[\d\s-]{8,}$/.test(phone);
        }

        function validateField(field) {
            const formGroup = field.closest('.form-group');
            const errorMessage = formGroup?.querySelector('.error-message');
            
            if (!formGroup || !errorMessage) return true;
            
            let isValid = true;
            let message = 'This field is required';
            
            if (!field.value.trim()) {
                isValid = false;
            } 
            else if (field.type === 'email' && !isValidEmail(field.value)) {
                isValid = false;
                message = 'Please enter a valid email address';
            }
            else if (field.id === 'phone' && !isValidPhone(field.value)) {
                isValid = false;
                message = 'Please enter a valid phone number';
            }
            else if (field.id === 'grad-year') {
                const year = parseInt(field.value);
                if (isNaN(year) || year < 1900 || year > new Date().getFullYear()) {
                    isValid = false;
                    message = 'Please enter a valid graduation year';
                }
            }
            else if (field.id === 'countries') {
                const selected = field.selectedOptions.length;
                if (selected !== 2) {
                    isValid = false;
                    message = 'Please select exactly 2 countries';
                }
            }
            
            if (!isValid) {
                formGroup.classList.add('error');
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            } else {
                formGroup.classList.remove('error');
                errorMessage.style.display = 'none';
            }
            
            return isValid;
        }

        function validateFileInput(input) {
            const formGroup = input.closest('.form-group');
            const errorMessage = formGroup?.querySelector('.error-message');
            
            if (!formGroup || !errorMessage) return true;
            
            let isValid = true;
            
            if (input.required && !input.files.length) {
                isValid = false;
                errorMessage.textContent = 'This file is required';
            }
            else if (input.files.length) {
                const file = input.files[0];
                const validTypes = ['application/pdf', 'image/jpeg', 'image/png', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                const maxSize = 5 * 1024 * 1024; // 5MB
                
                if (!validTypes.includes(file.type)) {
                    isValid = false;
                    errorMessage.textContent = 'Invalid file type. Please upload PDF, JPG, or PNG';
                }
                else if (file.size > maxSize) {
                    isValid = false;
                    errorMessage.textContent = 'File too large. Max size is 5MB';
                }
            }
            
            if (!isValid) {
                formGroup.classList.add('error');
                errorMessage.style.display = 'block';
            } else {
                formGroup.classList.remove('error');
                errorMessage.style.display = 'none';
            }
            
            return isValid;
        }

        // Validate individual fields on blur
        const requiredFields = admissionForm.querySelectorAll('[required]');
        requiredFields.forEach(field => {
            field.addEventListener('blur', function() {
                validateField(this);
            });
        });

        // File input validation
        const fileInputs = admissionForm.querySelectorAll('input[type="file"]');
        fileInputs.forEach(input => {
            input.addEventListener('change', function() {
                validateFileInput(this);
            });
        });

        // Limit countries selection to exactly 2
        const countriesSelect = document.getElementById('countries');
        if (countriesSelect) {
            countriesSelect.addEventListener('change', function() {
                const selectedOptions = Array.from(this.selectedOptions);
                if (selectedOptions.length > 2) {
                    // Deselect the oldest selection if more than 2 are selected
                    for (let i = 0; i < selectedOptions.length - 2; i++) {
                        selectedOptions[i].selected = false;
                    }
                }
                validateField(this);
            });
        }

        // Form submission
        admissionForm.addEventListener('submit', function(e) {
            e.preventDefault();
            let isValid = true;
            
            // Validate all required fields
            requiredFields.forEach(field => {
                if (!validateField(field)) {
                    isValid = false;
                }
            });
            
            // Validate file inputs
            fileInputs.forEach(input => {
                if (input.required && !validateFileInput(input)) {
                    isValid = false;
                }
            });
            
            if (isValid) {
                const submitBtn = document.getElementById('submit-btn');
                const spinner = document.getElementById('spinner');
                const formMessage = document.getElementById('form-message');
                
                // Show loading spinner
                if (submitBtn) {
                    submitBtn.classList.add('loading');
                    submitBtn.disabled = true;
                }
                if (spinner) spinner.style.display = 'inline-block';
                
                // Submit form via AJAX
                const formData = new FormData(admissionForm);
                
                fetch(admissionForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        // Show success message
                        if (formMessage) {
                            formMessage.textContent = 'Thank you! Your application has been submitted successfully. We will contact you shortly.';
                            formMessage.className = 'form-message success';
                        }
                        
                        // Reset form
                        admissionForm.reset();
                    } else {
                        throw new Error('Form submission failed');
                    }
                })
                .catch(error => {
                    // Show error message
                    if (formMessage) {
                        formMessage.textContent = 'There was an error submitting your form. Please try again or contact us directly.';
                        formMessage.className = 'form-message error';
                    }
                    console.error('Error:', error);
                })
                .finally(() => {
                    // Hide loading spinner
                    if (submitBtn) {
                        submitBtn.classList.remove('loading');
                        submitBtn.disabled = false;
                    }
                    if (spinner) spinner.style.display = 'none';
                    
                    // Scroll to message
                    if (formMessage) formMessage.scrollIntoView({ behavior: 'smooth' });
                });
            }
        });
    }
});
    </script>
</body>
</html>